<%

# requires local variables:
#   errors
#   displaying_cat1 (boolean)

# Note: all errors should be from the same test execution

%>

<% return if errors.count == 0 %>

<table class = 'table table-hover table-condensed'>
  <thead>
    <tr>
      <% if displaying_cat1 %>
        <th scope="col" class = 'col-sm-8'>Error message</th>
        <th scope="col" class = 'col-sm-2'>XML File</th>
      <% else %>
        <th scope="col" class = 'col-sm-10'>Error message</th>
      <% end %>
      <th scope="col" class = 'col-sm-2'>Go To in XML</th>
    </tr>
  </thead>
  <tbody>
    <% errors.sort { |a, b| compare_error_locations_across_files(a, b) }.each do |error| %>
      <tr>
        <td><%= error.message %></td>
        <% if displaying_cat1 %>
          <td><%= error.file_name %></td>
        <% end %>
        <td>
          <% unless error.location.nil? || error.location == '/' || error.test_execution.task._type == 'C3Task' %>
            <% line_num = get_line_number(error) %>
            <a class = 'execution_error_link' href = <%= "#error_#{error.id}" %> data-line-number = <%= line_num %>>jump to error</a>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>