<%

# local variable 'tests' should be filtering_tests

%>

<table class = 'table table-hover table-condensed'>
  <thead>
    <th class = 'col-sm-1'></th>
    <th class = 'col-sm-5'></th>
    <th class = 'col-sm-3'><strong>CAT 1</strong></th>
    <th class = 'col-sm-3'><strong>CAT 3</strong></th>
  </thead>
  <tbody>
    <% tests.each do |test| %>
      <% cat1_status, cat3_status = filtering_test_statuses(test) %>
      <tr>
        <td></td>
        <td>
          <% visibility = cat1_status == 'passing' && cat3_status == 'passing' ? '' : 'invisible' %>
          <i class = 'fa fa-fw fa-check text-success <%= visibility %>'></i>
          <%= test.options.filters.keys.join('/').titleize %>
        </td>
        <td><%= render partial: 'filter_test_link', locals: { task: test.cat1_task } %></td>
        <td><%= render partial: 'filter_test_link', locals: { task: test.cat3_task } %></td>
      </tr>
    <% end %>
  </tbody>
</table>